<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Sys calls related to the program execution flow."><meta name="keywords" content="rust, rustlang, rust-lang, exec"><title>gstd::exec - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-b826345d929eb323.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-87108236bf50c158.css"><link rel="stylesheet" disabled href="../../static.files/dark-839c5fb8722cb456.css"><link rel="stylesheet" disabled href="../../static.files/ayu-d48ac194417684c8.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../static.files/main-0dede64717b247ca.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-201a7e04dc4c6fce.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../gstd/index.html"><div class="logo-container"><img src="https://docs.gear.rs/logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../gstd/index.html"><div class="logo-container">
                    <img src="https://docs.gear.rs/logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module exec</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../index.html">gstd</a>::<wbr><a class="mod" href="#">exec</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/gstd/exec.rs.html#19-168">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Sys calls related to the program execution flow.</p>
<p>Wraps methods from <code>gcore</code> for getting the current block height,
the current block timestamp, the current value of the gas available for
execution.</p>
<p>The block height serves to identify a particular block.
This information can be used to enable many scenarios like restricting or
allowing of some functions until certain block height is reached.</p>
<p>The timestamp is the number of milliseconds elapsed since the Unix epoch.</p>
<p>Each message processing consumes gas, both on instructions execution and
memory allocations. This function returns a value of the gas available for
spending during current execution. Its use may help to avoid unexpected
behaviors during the smart-contract execution in case of not enough gas
available.</p>
<p>Value available is the total available value of program.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gstd::{exec, msg};

<span class="comment">// Send a reply after the block height reaches the number 1000
</span><span class="kw">unsafe extern </span><span class="string">&quot;C&quot; </span><span class="kw">fn </span>handle() {
    <span class="kw">if </span>exec::block_height() &gt;= <span class="number">1000 </span>{
        msg::reply(<span class="string">b&quot;Block #1000 reached&quot;</span>, <span class="number">0</span>).unwrap();
    }
}</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gstd::{exec, msg};

<span class="comment">// Send a reply after the block timestamp reaches the February 22, 2022
</span><span class="kw">unsafe extern </span><span class="string">&quot;C&quot; </span><span class="kw">fn </span>handle() {
    <span class="kw">if </span>exec::block_timestamp() &gt;= <span class="number">1645488000000 </span>{
        msg::reply(<span class="string">b&quot;The current block is generated after February 22, 2022&quot;</span>, <span class="number">0</span>).unwrap();
    }
}</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gstd::exec;

<span class="comment">// Perform work while `gas_available` is more than 1000
</span><span class="kw">unsafe extern </span><span class="string">&quot;C&quot; </span><span class="kw">fn </span>handle() {
    <span class="kw">while </span>exec::gas_available() &gt; <span class="number">1000 </span>{
        <span class="comment">// ...
    </span>}
}</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>gstd::exec;

<span class="comment">// Get self value balance in program
</span><span class="kw">unsafe extern </span><span class="string">&quot;C&quot; </span><span class="kw">fn </span>handle() {
    <span class="kw">let </span>_my_balance = exec::value_available();
}</code></pre></div>
</div></details><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.block_height.html" title="gstd::exec::block_height fn">block_height</a></div><div class="item-right docblock-short">Get the current block height.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.block_timestamp.html" title="gstd::exec::block_timestamp fn">block_timestamp</a></div><div class="item-right docblock-short">Get the current block timestamp.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.exit.html" title="gstd::exec::exit fn">exit</a></div><div class="item-right docblock-short">Terminate the execution of a program.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.gas_available.html" title="gstd::exec::gas_available fn">gas_available</a></div><div class="item-right docblock-short">Get the current value of the gas available for execution.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.leave.html" title="gstd::exec::leave fn">leave</a></div><div class="item-right docblock-short">Terminate the current message handling.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.origin.html" title="gstd::exec::origin fn">origin</a></div><div class="item-right docblock-short">Return the id of original user who initiated communication with blockchain,
during which, currently processing message was created.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.program_id.html" title="gstd::exec::program_id fn">program_id</a></div><div class="item-right docblock-short">Return ID of the current program.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.random.html" title="gstd::exec::random fn">random</a></div><div class="item-right docblock-short">Get the random seed, along with the time in the past
since when it was determinable by chain observers.
The random seed is determined from the random seed of the block with the
message id as the subject.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.value_available.html" title="gstd::exec::value_available fn">value_available</a></div><div class="item-right docblock-short">Get the total available value amount.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.wait.html" title="gstd::exec::wait fn">wait</a></div><div class="item-right docblock-short">Pause the current message handling.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.wait_for.html" title="gstd::exec::wait_for fn">wait_for</a></div><div class="item-right docblock-short">Same as <a href="fn.wait.html" title="wait"><code>wait</code></a>, but delays handling for given specific amount of blocks.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.wait_up_to.html" title="gstd::exec::wait_up_to fn">wait_up_to</a></div><div class="item-right docblock-short">Same as <a href="fn.wait.html" title="wait"><code>wait</code></a>, but delays handling for maximal amount of blocks
that could be payed, that doesn’t exceed given duration.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.wake.html" title="gstd::exec::wake fn">wake</a></div><div class="item-right docblock-short">Resume previously paused message handling.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.wake_delayed.html" title="gstd::exec::wake_delayed fn">wake_delayed</a></div><div class="item-right docblock-short">Same as <a href="fn.wake.html" title="wake"><code>wake</code></a>, but wakes delayed.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="gstd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (7eef946fc 2022-11-06)" data-search-js="search-39ee4160c7dc16c9.js" data-settings-js="settings-3a0b9947ba1bd99a.js" data-settings-css="settings-a66f7524084a489a.css" ></div></body></html>